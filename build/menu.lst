ARM GAS  /tmp/ccx9IyZI.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"menu.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.Display_Draw_Menu_Box,"ax",%progbits
  18              		.align	1
  19              		.global	Display_Draw_Menu_Box
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	Display_Draw_Menu_Box:
  26              	.LFB125:
  27              		.file 1 "Display/Menu/menu.c"
   1:Display/Menu/menu.c **** /**
   2:Display/Menu/menu.c ****   ******************************************************************************
   3:Display/Menu/menu.c ****   * @file           : menu.c
   4:Display/Menu/menu.c ****   * @author         : Karol Gutowski
   5:Display/Menu/menu.c ****   * @brief          : This file contains funcitons for menu.
   6:Display/Menu/menu.c ****   ******************************************************************************
   7:Display/Menu/menu.c ****   */
   8:Display/Menu/menu.c **** 
   9:Display/Menu/menu.c ****   #include "menu.h"
  10:Display/Menu/menu.c **** 
  11:Display/Menu/menu.c ****   void Menu_Init()
  12:Display/Menu/menu.c ****   {
  13:Display/Menu/menu.c ****     current_position = 1;
  14:Display/Menu/menu.c ****     click = 0;
  15:Display/Menu/menu.c ****     action = 0;
  16:Display/Menu/menu.c ****     menu_text = malloc(sizeof(char *)*menu_length);
  17:Display/Menu/menu.c ****     *menu_text = "Open";
  18:Display/Menu/menu.c ****     *(menu_text+1) = "Connect";
  19:Display/Menu/menu.c ****     *(menu_text+2) = "Options";
  20:Display/Menu/menu.c **** 
  21:Display/Menu/menu.c **** 
  22:Display/Menu/menu.c ****     EPD_Init(lut_partial_update);
  23:Display/Menu/menu.c ****     Paint_Clear(WHITE);
  24:Display/Menu/menu.c ****     for(int i=0;i<menu_length;i++)
  25:Display/Menu/menu.c ****     {
  26:Display/Menu/menu.c ****       if(current_position==i)
  27:Display/Menu/menu.c ****       {
  28:Display/Menu/menu.c ****         Display_Draw_Menu_Box(i,0,1);
  29:Display/Menu/menu.c ****         menu_text_usage[i]=1;
  30:Display/Menu/menu.c ****       }
  31:Display/Menu/menu.c ****       else
ARM GAS  /tmp/ccx9IyZI.s 			page 2


  32:Display/Menu/menu.c ****       {
  33:Display/Menu/menu.c ****         Display_Draw_Menu_Box(i,0,0);
  34:Display/Menu/menu.c ****         menu_text_usage[i]=0;
  35:Display/Menu/menu.c ****       }
  36:Display/Menu/menu.c ****     }
  37:Display/Menu/menu.c ****     EPD_Display(BlackImage);
  38:Display/Menu/menu.c ****   }
  39:Display/Menu/menu.c **** 
  40:Display/Menu/menu.c ****   void Update_Menu()
  41:Display/Menu/menu.c ****   {
  42:Display/Menu/menu.c ****     for(int i=0;i<menu_length;i++)
  43:Display/Menu/menu.c ****     {
  44:Display/Menu/menu.c ****       if(current_position==i)
  45:Display/Menu/menu.c ****       {
  46:Display/Menu/menu.c ****         if(menu_text_usage[i]==0)
  47:Display/Menu/menu.c ****           Partial_Display_Draw_Menu_Box(i,0,1);
  48:Display/Menu/menu.c ****         menu_text_usage[i]=1;
  49:Display/Menu/menu.c ****       }
  50:Display/Menu/menu.c ****       else
  51:Display/Menu/menu.c ****       {
  52:Display/Menu/menu.c ****         if(menu_text_usage[i]==1)
  53:Display/Menu/menu.c ****           Partial_Display_Draw_Menu_Box(i,0,0);
  54:Display/Menu/menu.c ****         menu_text_usage[i]=0;
  55:Display/Menu/menu.c ****       }
  56:Display/Menu/menu.c ****     }
  57:Display/Menu/menu.c ****     EPD_Display(BlackImage);
  58:Display/Menu/menu.c ****   }
  59:Display/Menu/menu.c **** 
  60:Display/Menu/menu.c ****   /*
  61:Display/Menu/menu.c ****    * Function: Partial_Display_Draw_Menu_Box
  62:Display/Menu/menu.c ****    * ----------------------------
  63:Display/Menu/menu.c ****    *   Partialy change the displayed menu to avoid full screen refresh
  64:Display/Menu/menu.c ****    *
  65:Display/Menu/menu.c ****    *   position: one real value
  66:Display/Menu/menu.c ****    *   level: the other real value
  67:Display/Menu/menu.c ****    *   select: 0 if not selected, selected if any other value
  68:Display/Menu/menu.c ****    *
  69:Display/Menu/menu.c ****    *   returns: nothing
  70:Display/Menu/menu.c ****    */
  71:Display/Menu/menu.c ****   void Display_Draw_Menu_Box(int position, int level, int select)
  72:Display/Menu/menu.c ****   {
  28              		.loc 1 72 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 70B5     		push	{r4, r5, r6, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 16
  36              		.cfi_offset 4, -16
  37              		.cfi_offset 5, -12
  38              		.cfi_offset 6, -8
  39              		.cfi_offset 14, -4
  40 0002 84B0     		sub	sp, sp, #16
  41              	.LCFI1:
  42              		.cfi_def_cfa_offset 32
  43 0004 0446     		mov	r4, r0
ARM GAS  /tmp/ccx9IyZI.s 			page 3


  73:Display/Menu/menu.c ****     if(select==0)
  44              		.loc 1 73 0
  45 0006 12B3     		cbz	r2, .L5
  74:Display/Menu/menu.c ****     {
  75:Display/Menu/menu.c ****       Paint_DrawRectangle(2, 2+22*position, 110, 24+22*position, BLACK, DRAW_FILL_EMPTY, DOT_PIXEL_
  76:Display/Menu/menu.c ****       Paint_DrawString_EN(3, 3+22*position, *(menu_text+position), &Font20, WHITE, BLACK);
  77:Display/Menu/menu.c ****     }
  78:Display/Menu/menu.c ****     else
  79:Display/Menu/menu.c ****     {
  80:Display/Menu/menu.c ****       Paint_DrawRectangle(2, 2+22*position, 110, 24+22*position, BLACK, DRAW_FILL_FULL, DOT_PIXEL_2
  46              		.loc 1 80 0
  47 0008 00EB8003 		add	r3, r0, r0, lsl #2
  48 000c 00EB4303 		add	r3, r0, r3, lsl #1
  49 0010 5D00     		lsls	r5, r3, #1
  50 0012 ADB2     		uxth	r5, r5
  51 0014 05F11803 		add	r3, r5, #24
  52 0018 9BB2     		uxth	r3, r3
  53 001a A91C     		adds	r1, r5, #2
  54              	.LVL1:
  55 001c 89B2     		uxth	r1, r1
  56 001e 0220     		movs	r0, #2
  57              	.LVL2:
  58 0020 0290     		str	r0, [sp, #8]
  59 0022 0122     		movs	r2, #1
  60              	.LVL3:
  61 0024 0192     		str	r2, [sp, #4]
  62 0026 0026     		movs	r6, #0
  63 0028 0096     		str	r6, [sp]
  64 002a 6E22     		movs	r2, #110
  65 002c FFF7FEFF 		bl	Paint_DrawRectangle
  66              	.LVL4:
  81:Display/Menu/menu.c ****       Paint_DrawString_EN(3, 3+22*position, *(menu_text+position), &Font20, BLACK, WHITE);
  67              		.loc 1 81 0
  68 0030 174B     		ldr	r3, .L6
  69 0032 1B68     		ldr	r3, [r3]
  70 0034 53F82420 		ldr	r2, [r3, r4, lsl #2]
  71 0038 E91C     		adds	r1, r5, #3
  72 003a FF23     		movs	r3, #255
  73 003c 0193     		str	r3, [sp, #4]
  74 003e 0096     		str	r6, [sp]
  75 0040 144B     		ldr	r3, .L6+4
  76 0042 89B2     		uxth	r1, r1
  77 0044 0320     		movs	r0, #3
  78 0046 FFF7FEFF 		bl	Paint_DrawString_EN
  79              	.LVL5:
  80              	.L1:
  82:Display/Menu/menu.c ****     }
  83:Display/Menu/menu.c ****   }
  81              		.loc 1 83 0
  82 004a 04B0     		add	sp, sp, #16
  83              	.LCFI2:
  84              		.cfi_remember_state
  85              		.cfi_def_cfa_offset 16
  86              		@ sp needed
  87 004c 70BD     		pop	{r4, r5, r6, pc}
  88              	.LVL6:
  89              	.L5:
ARM GAS  /tmp/ccx9IyZI.s 			page 4


  90              	.LCFI3:
  91              		.cfi_restore_state
  75:Display/Menu/menu.c ****       Paint_DrawString_EN(3, 3+22*position, *(menu_text+position), &Font20, WHITE, BLACK);
  92              		.loc 1 75 0
  93 004e 00EB8003 		add	r3, r0, r0, lsl #2
  94 0052 00EB4303 		add	r3, r0, r3, lsl #1
  95 0056 5D00     		lsls	r5, r3, #1
  96 0058 ADB2     		uxth	r5, r5
  97 005a 05F11803 		add	r3, r5, #24
  98 005e 9BB2     		uxth	r3, r3
  99 0060 A91C     		adds	r1, r5, #2
 100              	.LVL7:
 101 0062 89B2     		uxth	r1, r1
 102 0064 0220     		movs	r0, #2
 103              	.LVL8:
 104 0066 0290     		str	r0, [sp, #8]
 105 0068 0026     		movs	r6, #0
 106 006a 0196     		str	r6, [sp, #4]
 107 006c 0096     		str	r6, [sp]
 108 006e 6E22     		movs	r2, #110
 109              	.LVL9:
 110 0070 FFF7FEFF 		bl	Paint_DrawRectangle
 111              	.LVL10:
  76:Display/Menu/menu.c ****     }
 112              		.loc 1 76 0
 113 0074 064B     		ldr	r3, .L6
 114 0076 1B68     		ldr	r3, [r3]
 115 0078 53F82420 		ldr	r2, [r3, r4, lsl #2]
 116 007c E91C     		adds	r1, r5, #3
 117 007e 0196     		str	r6, [sp, #4]
 118 0080 FF23     		movs	r3, #255
 119 0082 0093     		str	r3, [sp]
 120 0084 034B     		ldr	r3, .L6+4
 121 0086 89B2     		uxth	r1, r1
 122 0088 0320     		movs	r0, #3
 123 008a FFF7FEFF 		bl	Paint_DrawString_EN
 124              	.LVL11:
 125 008e DCE7     		b	.L1
 126              	.L7:
 127              		.align	2
 128              	.L6:
 129 0090 00000000 		.word	.LANCHOR0
 130 0094 00000000 		.word	Font20
 131              		.cfi_endproc
 132              	.LFE125:
 134              		.section	.text.Menu_Init,"ax",%progbits
 135              		.align	1
 136              		.global	Menu_Init
 137              		.syntax unified
 138              		.thumb
 139              		.thumb_func
 140              		.fpu fpv4-sp-d16
 142              	Menu_Init:
 143              	.LFB123:
  12:Display/Menu/menu.c ****     current_position = 1;
 144              		.loc 1 12 0
 145              		.cfi_startproc
ARM GAS  /tmp/ccx9IyZI.s 			page 5


 146              		@ args = 0, pretend = 0, frame = 0
 147              		@ frame_needed = 0, uses_anonymous_args = 0
 148 0000 10B5     		push	{r4, lr}
 149              	.LCFI4:
 150              		.cfi_def_cfa_offset 8
 151              		.cfi_offset 4, -8
 152              		.cfi_offset 14, -4
  13:Display/Menu/menu.c ****     click = 0;
 153              		.loc 1 13 0
 154 0002 1C4B     		ldr	r3, .L16
 155 0004 0122     		movs	r2, #1
 156 0006 1A60     		str	r2, [r3]
  14:Display/Menu/menu.c ****     action = 0;
 157              		.loc 1 14 0
 158 0008 0024     		movs	r4, #0
 159 000a 1B4B     		ldr	r3, .L16+4
 160 000c 1C60     		str	r4, [r3]
  15:Display/Menu/menu.c ****     menu_text = malloc(sizeof(char *)*menu_length);
 161              		.loc 1 15 0
 162 000e 1B4B     		ldr	r3, .L16+8
 163 0010 1C60     		str	r4, [r3]
  16:Display/Menu/menu.c ****     *menu_text = "Open";
 164              		.loc 1 16 0
 165 0012 0C20     		movs	r0, #12
 166 0014 FFF7FEFF 		bl	malloc
 167              	.LVL12:
 168 0018 194B     		ldr	r3, .L16+12
 169 001a 1860     		str	r0, [r3]
  17:Display/Menu/menu.c ****     *(menu_text+1) = "Connect";
 170              		.loc 1 17 0
 171 001c 194B     		ldr	r3, .L16+16
 172 001e 0360     		str	r3, [r0]
  18:Display/Menu/menu.c ****     *(menu_text+2) = "Options";
 173              		.loc 1 18 0
 174 0020 194B     		ldr	r3, .L16+20
 175 0022 4360     		str	r3, [r0, #4]
  19:Display/Menu/menu.c **** 
 176              		.loc 1 19 0
 177 0024 194B     		ldr	r3, .L16+24
 178 0026 8360     		str	r3, [r0, #8]
  22:Display/Menu/menu.c ****     Paint_Clear(WHITE);
 179              		.loc 1 22 0
 180 0028 1948     		ldr	r0, .L16+28
 181 002a FFF7FEFF 		bl	EPD_Init
 182              	.LVL13:
  23:Display/Menu/menu.c ****     for(int i=0;i<menu_length;i++)
 183              		.loc 1 23 0
 184 002e FF20     		movs	r0, #255
 185 0030 FFF7FEFF 		bl	Paint_Clear
 186              	.LVL14:
 187              	.LBB2:
  24:Display/Menu/menu.c ****     {
 188              		.loc 1 24 0
 189 0034 09E0     		b	.L9
 190              	.LVL15:
 191              	.L15:
  28:Display/Menu/menu.c ****         menu_text_usage[i]=1;
ARM GAS  /tmp/ccx9IyZI.s 			page 6


 192              		.loc 1 28 0
 193 0036 0122     		movs	r2, #1
 194 0038 0021     		movs	r1, #0
 195 003a 2046     		mov	r0, r4
 196 003c FFF7FEFF 		bl	Display_Draw_Menu_Box
 197              	.LVL16:
  29:Display/Menu/menu.c ****       }
 198              		.loc 1 29 0
 199 0040 144B     		ldr	r3, .L16+32
 200 0042 0122     		movs	r2, #1
 201 0044 43F82420 		str	r2, [r3, r4, lsl #2]
 202              	.L11:
  24:Display/Menu/menu.c ****     {
 203              		.loc 1 24 0 discriminator 2
 204 0048 0134     		adds	r4, r4, #1
 205              	.LVL17:
 206              	.L9:
  24:Display/Menu/menu.c ****     {
 207              		.loc 1 24 0 is_stmt 0 discriminator 1
 208 004a 022C     		cmp	r4, #2
 209 004c 0DDC     		bgt	.L14
  26:Display/Menu/menu.c ****       {
 210              		.loc 1 26 0 is_stmt 1
 211 004e 094B     		ldr	r3, .L16
 212 0050 1B68     		ldr	r3, [r3]
 213 0052 A342     		cmp	r3, r4
 214 0054 EFD0     		beq	.L15
  33:Display/Menu/menu.c ****         menu_text_usage[i]=0;
 215              		.loc 1 33 0
 216 0056 0022     		movs	r2, #0
 217 0058 1146     		mov	r1, r2
 218 005a 2046     		mov	r0, r4
 219 005c FFF7FEFF 		bl	Display_Draw_Menu_Box
 220              	.LVL18:
  34:Display/Menu/menu.c ****       }
 221              		.loc 1 34 0
 222 0060 0C4B     		ldr	r3, .L16+32
 223 0062 0022     		movs	r2, #0
 224 0064 43F82420 		str	r2, [r3, r4, lsl #2]
 225 0068 EEE7     		b	.L11
 226              	.L14:
 227              	.LBE2:
  37:Display/Menu/menu.c ****   }
 228              		.loc 1 37 0
 229 006a 0B4B     		ldr	r3, .L16+36
 230 006c 1868     		ldr	r0, [r3]
 231 006e FFF7FEFF 		bl	EPD_Display
 232              	.LVL19:
  38:Display/Menu/menu.c **** 
 233              		.loc 1 38 0
 234 0072 10BD     		pop	{r4, pc}
 235              	.LVL20:
 236              	.L17:
 237              		.align	2
 238              	.L16:
 239 0074 00000000 		.word	current_position
 240 0078 00000000 		.word	click
ARM GAS  /tmp/ccx9IyZI.s 			page 7


 241 007c 00000000 		.word	action
 242 0080 00000000 		.word	.LANCHOR0
 243 0084 00000000 		.word	.LC0
 244 0088 08000000 		.word	.LC1
 245 008c 10000000 		.word	.LC2
 246 0090 00000000 		.word	lut_partial_update
 247 0094 00000000 		.word	menu_text_usage
 248 0098 00000000 		.word	BlackImage
 249              		.cfi_endproc
 250              	.LFE123:
 252              		.section	.text.Partial_Display_Draw_Menu_Box,"ax",%progbits
 253              		.align	1
 254              		.global	Partial_Display_Draw_Menu_Box
 255              		.syntax unified
 256              		.thumb
 257              		.thumb_func
 258              		.fpu fpv4-sp-d16
 260              	Partial_Display_Draw_Menu_Box:
 261              	.LFB126:
  84:Display/Menu/menu.c **** 
  85:Display/Menu/menu.c ****   /*
  86:Display/Menu/menu.c ****    * Function: Partial_Display_Draw_Menu_Box
  87:Display/Menu/menu.c ****    * ----------------------------
  88:Display/Menu/menu.c ****    *   Partialy change the displayed menu to avoid full screen refresh
  89:Display/Menu/menu.c ****    *
  90:Display/Menu/menu.c ****    *   position: one real value
  91:Display/Menu/menu.c ****    *   level: the other real value
  92:Display/Menu/menu.c ****    *   select: 0 if not selected, selected if any other value
  93:Display/Menu/menu.c ****    *
  94:Display/Menu/menu.c ****    *   returns: nothing
  95:Display/Menu/menu.c ****    */
  96:Display/Menu/menu.c ****   void Partial_Display_Draw_Menu_Box(int position, int level, int select)
  97:Display/Menu/menu.c ****   {
 262              		.loc 1 97 0
 263              		.cfi_startproc
 264              		@ args = 0, pretend = 0, frame = 0
 265              		@ frame_needed = 0, uses_anonymous_args = 0
 266              	.LVL21:
 267 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 268              	.LCFI5:
 269              		.cfi_def_cfa_offset 24
 270              		.cfi_offset 4, -24
 271              		.cfi_offset 5, -20
 272              		.cfi_offset 6, -16
 273              		.cfi_offset 7, -12
 274              		.cfi_offset 8, -8
 275              		.cfi_offset 14, -4
 276 0004 84B0     		sub	sp, sp, #16
 277              	.LCFI6:
 278              		.cfi_def_cfa_offset 40
 279 0006 0746     		mov	r7, r0
 280 0008 9046     		mov	r8, r2
  98:Display/Menu/menu.c ****     Paint_ClearWindows(2, 2+22*position, 110, 24+22*position, WHITE);
 281              		.loc 1 98 0
 282 000a 00EB8003 		add	r3, r0, r0, lsl #2
 283 000e 00EB4303 		add	r3, r0, r3, lsl #1
 284 0012 5C00     		lsls	r4, r3, #1
ARM GAS  /tmp/ccx9IyZI.s 			page 8


 285 0014 A4B2     		uxth	r4, r4
 286 0016 A51C     		adds	r5, r4, #2
 287 0018 ADB2     		uxth	r5, r5
 288 001a 04F11806 		add	r6, r4, #24
 289 001e B6B2     		uxth	r6, r6
 290 0020 FF23     		movs	r3, #255
 291 0022 0093     		str	r3, [sp]
 292 0024 3346     		mov	r3, r6
 293 0026 6E22     		movs	r2, #110
 294              	.LVL22:
 295 0028 2946     		mov	r1, r5
 296              	.LVL23:
 297 002a 0220     		movs	r0, #2
 298              	.LVL24:
 299 002c FFF7FEFF 		bl	Paint_ClearWindows
 300              	.LVL25:
  99:Display/Menu/menu.c ****     if(select==0)
 301              		.loc 1 99 0
 302 0030 B8F1000F 		cmp	r8, #0
 303 0034 1DD0     		beq	.L22
 100:Display/Menu/menu.c ****     {
 101:Display/Menu/menu.c ****       Paint_DrawRectangle(2, 2+22*position, 110, 24+22*position, BLACK, DRAW_FILL_EMPTY, DOT_PIXEL_
 102:Display/Menu/menu.c ****       Paint_DrawString_EN(3, 3+22*position, *(menu_text+position), &Font20, WHITE, BLACK);
 103:Display/Menu/menu.c ****     }
 104:Display/Menu/menu.c ****     else
 105:Display/Menu/menu.c ****     {
 106:Display/Menu/menu.c ****       Paint_DrawRectangle(2, 2+22*position, 110, 24+22*position, BLACK, DRAW_FILL_FULL, DOT_PIXEL_2
 304              		.loc 1 106 0
 305 0036 0220     		movs	r0, #2
 306 0038 0290     		str	r0, [sp, #8]
 307 003a 0123     		movs	r3, #1
 308 003c 0193     		str	r3, [sp, #4]
 309 003e 4FF00008 		mov	r8, #0
 310              	.LVL26:
 311 0042 CDF80080 		str	r8, [sp]
 312 0046 3346     		mov	r3, r6
 313 0048 6E22     		movs	r2, #110
 314 004a 2946     		mov	r1, r5
 315 004c FFF7FEFF 		bl	Paint_DrawRectangle
 316              	.LVL27:
 107:Display/Menu/menu.c ****       Paint_DrawString_EN(3, 3+22*position, *(menu_text+position), &Font20, BLACK, WHITE);
 317              		.loc 1 107 0
 318 0050 154B     		ldr	r3, .L23
 319 0052 1B68     		ldr	r3, [r3]
 320 0054 53F82720 		ldr	r2, [r3, r7, lsl #2]
 321 0058 E11C     		adds	r1, r4, #3
 322 005a FF23     		movs	r3, #255
 323 005c 0193     		str	r3, [sp, #4]
 324 005e CDF80080 		str	r8, [sp]
 325 0062 124B     		ldr	r3, .L23+4
 326 0064 89B2     		uxth	r1, r1
 327 0066 0320     		movs	r0, #3
 328 0068 FFF7FEFF 		bl	Paint_DrawString_EN
 329              	.LVL28:
 330              	.L18:
 108:Display/Menu/menu.c ****     }
 109:Display/Menu/menu.c ****   }
ARM GAS  /tmp/ccx9IyZI.s 			page 9


 331              		.loc 1 109 0
 332 006c 04B0     		add	sp, sp, #16
 333              	.LCFI7:
 334              		.cfi_remember_state
 335              		.cfi_def_cfa_offset 24
 336              		@ sp needed
 337 006e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 338              	.LVL29:
 339              	.L22:
 340              	.LCFI8:
 341              		.cfi_restore_state
 101:Display/Menu/menu.c ****       Paint_DrawString_EN(3, 3+22*position, *(menu_text+position), &Font20, WHITE, BLACK);
 342              		.loc 1 101 0
 343 0072 0220     		movs	r0, #2
 344 0074 0290     		str	r0, [sp, #8]
 345 0076 CDF80480 		str	r8, [sp, #4]
 346 007a CDF80080 		str	r8, [sp]
 347 007e 3346     		mov	r3, r6
 348 0080 6E22     		movs	r2, #110
 349 0082 2946     		mov	r1, r5
 350 0084 FFF7FEFF 		bl	Paint_DrawRectangle
 351              	.LVL30:
 102:Display/Menu/menu.c ****     }
 352              		.loc 1 102 0
 353 0088 074B     		ldr	r3, .L23
 354 008a 1B68     		ldr	r3, [r3]
 355 008c 53F82720 		ldr	r2, [r3, r7, lsl #2]
 356 0090 E11C     		adds	r1, r4, #3
 357 0092 CDF80480 		str	r8, [sp, #4]
 358 0096 FF23     		movs	r3, #255
 359 0098 0093     		str	r3, [sp]
 360 009a 044B     		ldr	r3, .L23+4
 361 009c 89B2     		uxth	r1, r1
 362 009e 0320     		movs	r0, #3
 363 00a0 FFF7FEFF 		bl	Paint_DrawString_EN
 364              	.LVL31:
 365 00a4 E2E7     		b	.L18
 366              	.L24:
 367 00a6 00BF     		.align	2
 368              	.L23:
 369 00a8 00000000 		.word	.LANCHOR0
 370 00ac 00000000 		.word	Font20
 371              		.cfi_endproc
 372              	.LFE126:
 374              		.section	.text.Update_Menu,"ax",%progbits
 375              		.align	1
 376              		.global	Update_Menu
 377              		.syntax unified
 378              		.thumb
 379              		.thumb_func
 380              		.fpu fpv4-sp-d16
 382              	Update_Menu:
 383              	.LFB124:
  41:Display/Menu/menu.c ****     for(int i=0;i<menu_length;i++)
 384              		.loc 1 41 0
 385              		.cfi_startproc
 386              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccx9IyZI.s 			page 10


 387              		@ frame_needed = 0, uses_anonymous_args = 0
 388 0000 10B5     		push	{r4, lr}
 389              	.LCFI9:
 390              		.cfi_def_cfa_offset 8
 391              		.cfi_offset 4, -8
 392              		.cfi_offset 14, -4
 393              	.LVL32:
 394              	.LBB3:
  42:Display/Menu/menu.c ****     {
 395              		.loc 1 42 0
 396 0002 0024     		movs	r4, #0
 397 0004 13E0     		b	.L26
 398              	.LVL33:
 399              	.L35:
  46:Display/Menu/menu.c ****           Partial_Display_Draw_Menu_Box(i,0,1);
 400              		.loc 1 46 0
 401 0006 154B     		ldr	r3, .L36
 402 0008 53F82430 		ldr	r3, [r3, r4, lsl #2]
 403 000c 23B1     		cbz	r3, .L33
 404              	.L28:
  48:Display/Menu/menu.c ****       }
 405              		.loc 1 48 0
 406 000e 134B     		ldr	r3, .L36
 407 0010 0122     		movs	r2, #1
 408 0012 43F82420 		str	r2, [r3, r4, lsl #2]
 409 0016 09E0     		b	.L29
 410              	.L33:
  47:Display/Menu/menu.c ****         menu_text_usage[i]=1;
 411              		.loc 1 47 0
 412 0018 0122     		movs	r2, #1
 413 001a 0021     		movs	r1, #0
 414 001c 2046     		mov	r0, r4
 415 001e FFF7FEFF 		bl	Partial_Display_Draw_Menu_Box
 416              	.LVL34:
 417 0022 F4E7     		b	.L28
 418              	.L30:
  54:Display/Menu/menu.c ****       }
 419              		.loc 1 54 0
 420 0024 0D4B     		ldr	r3, .L36
 421 0026 0022     		movs	r2, #0
 422 0028 43F82420 		str	r2, [r3, r4, lsl #2]
 423              	.L29:
  42:Display/Menu/menu.c ****     {
 424              		.loc 1 42 0 discriminator 2
 425 002c 0134     		adds	r4, r4, #1
 426              	.LVL35:
 427              	.L26:
  42:Display/Menu/menu.c ****     {
 428              		.loc 1 42 0 is_stmt 0 discriminator 1
 429 002e 022C     		cmp	r4, #2
 430 0030 0EDC     		bgt	.L34
  44:Display/Menu/menu.c ****       {
 431              		.loc 1 44 0 is_stmt 1
 432 0032 0B4B     		ldr	r3, .L36+4
 433 0034 1B68     		ldr	r3, [r3]
 434 0036 A342     		cmp	r3, r4
 435 0038 E5D0     		beq	.L35
ARM GAS  /tmp/ccx9IyZI.s 			page 11


  52:Display/Menu/menu.c ****           Partial_Display_Draw_Menu_Box(i,0,0);
 436              		.loc 1 52 0
 437 003a 084B     		ldr	r3, .L36
 438 003c 53F82430 		ldr	r3, [r3, r4, lsl #2]
 439 0040 012B     		cmp	r3, #1
 440 0042 EFD1     		bne	.L30
  53:Display/Menu/menu.c ****         menu_text_usage[i]=0;
 441              		.loc 1 53 0
 442 0044 0022     		movs	r2, #0
 443 0046 1146     		mov	r1, r2
 444 0048 2046     		mov	r0, r4
 445 004a FFF7FEFF 		bl	Partial_Display_Draw_Menu_Box
 446              	.LVL36:
 447 004e E9E7     		b	.L30
 448              	.L34:
 449              	.LBE3:
  57:Display/Menu/menu.c ****   }
 450              		.loc 1 57 0
 451 0050 044B     		ldr	r3, .L36+8
 452 0052 1868     		ldr	r0, [r3]
 453 0054 FFF7FEFF 		bl	EPD_Display
 454              	.LVL37:
  58:Display/Menu/menu.c **** 
 455              		.loc 1 58 0
 456 0058 10BD     		pop	{r4, pc}
 457              	.LVL38:
 458              	.L37:
 459 005a 00BF     		.align	2
 460              	.L36:
 461 005c 00000000 		.word	menu_text_usage
 462 0060 00000000 		.word	current_position
 463 0064 00000000 		.word	BlackImage
 464              		.cfi_endproc
 465              	.LFE124:
 467              		.comm	click,4,4
 468              		.comm	current_position,4,4
 469              		.comm	menu_text_usage,12,4
 470              		.comm	BlackImage,4,4
 471              		.comm	mode,4,4
 472              		.comm	action,4,4
 473              		.section	.bss.menu_text,"aw",%nobits
 474              		.align	2
 475              		.set	.LANCHOR0,. + 0
 478              	menu_text:
 479 0000 00000000 		.space	4
 480              		.section	.rodata.Menu_Init.str1.4,"aMS",%progbits,1
 481              		.align	2
 482              	.LC0:
 483 0000 4F70656E 		.ascii	"Open\000"
 483      00
 484 0005 000000   		.space	3
 485              	.LC1:
 486 0008 436F6E6E 		.ascii	"Connect\000"
 486      65637400 
 487              	.LC2:
 488 0010 4F707469 		.ascii	"Options\000"
 488      6F6E7300 
ARM GAS  /tmp/ccx9IyZI.s 			page 12


 489              		.text
 490              	.Letext0:
 491              		.file 2 "/usr/arm-none-eabi/include/machine/_default_types.h"
 492              		.file 3 "/usr/arm-none-eabi/include/sys/_stdint.h"
 493              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 494              		.file 5 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/system_stm32l4xx.h"
 495              		.file 6 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
 496              		.file 7 "Display/GUI/../Fonts/fonts.h"
 497              		.file 8 "Display/GUI/GUI_Paint.h"
 498              		.file 9 "Display/e-Paper/ImageData.h"
 499              		.file 10 "/usr/arm-none-eabi/include/sys/lock.h"
 500              		.file 11 "/usr/arm-none-eabi/include/sys/_types.h"
 501              		.file 12 "/usr/lib/gcc/arm-none-eabi/7.3.1/include/stddef.h"
 502              		.file 13 "/usr/arm-none-eabi/include/sys/reent.h"
 503              		.file 14 "/usr/arm-none-eabi/include/stdlib.h"
 504              		.file 15 "Inc/keyboard.h"
 505              		.file 16 "Display/display.h"
 506              		.file 17 "Display/e-Paper/EPD_2in9.h"
 507              		.file 18 "Display/Menu/menu.h"
ARM GAS  /tmp/ccx9IyZI.s 			page 13


DEFINED SYMBOLS
                            *ABS*:0000000000000000 menu.c
     /tmp/ccx9IyZI.s:18     .text.Display_Draw_Menu_Box:0000000000000000 $t
     /tmp/ccx9IyZI.s:25     .text.Display_Draw_Menu_Box:0000000000000000 Display_Draw_Menu_Box
     /tmp/ccx9IyZI.s:129    .text.Display_Draw_Menu_Box:0000000000000090 $d
     /tmp/ccx9IyZI.s:135    .text.Menu_Init:0000000000000000 $t
     /tmp/ccx9IyZI.s:142    .text.Menu_Init:0000000000000000 Menu_Init
     /tmp/ccx9IyZI.s:239    .text.Menu_Init:0000000000000074 $d
                            *COM*:0000000000000004 current_position
                            *COM*:0000000000000004 click
                            *COM*:0000000000000004 action
                            *COM*:000000000000000c menu_text_usage
                            *COM*:0000000000000004 BlackImage
     /tmp/ccx9IyZI.s:253    .text.Partial_Display_Draw_Menu_Box:0000000000000000 $t
     /tmp/ccx9IyZI.s:260    .text.Partial_Display_Draw_Menu_Box:0000000000000000 Partial_Display_Draw_Menu_Box
     /tmp/ccx9IyZI.s:369    .text.Partial_Display_Draw_Menu_Box:00000000000000a8 $d
     /tmp/ccx9IyZI.s:375    .text.Update_Menu:0000000000000000 $t
     /tmp/ccx9IyZI.s:382    .text.Update_Menu:0000000000000000 Update_Menu
     /tmp/ccx9IyZI.s:461    .text.Update_Menu:000000000000005c $d
                            *COM*:0000000000000004 mode
     /tmp/ccx9IyZI.s:474    .bss.menu_text:0000000000000000 $d
     /tmp/ccx9IyZI.s:478    .bss.menu_text:0000000000000000 menu_text
     /tmp/ccx9IyZI.s:481    .rodata.Menu_Init.str1.4:0000000000000000 $d

UNDEFINED SYMBOLS
Paint_DrawRectangle
Paint_DrawString_EN
Font20
malloc
EPD_Init
Paint_Clear
EPD_Display
lut_partial_update
Paint_ClearWindows
